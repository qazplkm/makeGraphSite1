<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  </head>
  <body>

    <div class="top-wrap hide">
      <h4>그래프 자세히보기</h4>
    </div>

    
    <div class="data-container up100">
      <div class="data-container-position">
        <div class="databox">
          <div>
            <h1>그래프를 만들어보자</h1>
          </div>

          <!-- <div>
            <button id="change-graph-btn">버튼</button> 
            <p>그래프이름</p>
            <input id="graph-name" type="text" />
            <p>그래프정보</p>
            <ul>
                <li><input type="text"></li>
            </ul>
            
            
          </div>          -->
          <div>
            <p>그래프 형태선택</p>
            <select id="GraphFormType">
              <option>선그래프</option>
              <option>바그래프</option>              
            </select>
            
            <button id="GraphFormTypeBtn">그래프모양선택</button>
          </div>

        </div>

        

      </div>
    </div>  
    

    <div class="container" style="transform:scale(0.5)">
      <button id="screenShot">그래프스샷</button>

      <div class="chart-container">
        <canvas id="myChart"></canvas>
      </div>
    </div>

    <script>      
      // 그래프모양 선택 인식
      let 그래프모양선택버튼 = document.getElementById('GraphFormTypeBtn');
      let 선택된그래프모양 = document.getElementById('GraphFormType');
      
      그래프모양선택버튼.addEventListener('click',function(){
        console.log(선택된그래프모양.value)
      })

      // 그래프데이타 인풋
      let graphName = document.getElementById("graph-name");
      let graphSize = document.getElementById("graph-size");
      let changeGraphBtn = document.getElementById("change-graph-btn");


      

      // 그래프에 데이타 적용
      changeGraphBtn.addEventListener("click", function () {
        console.log(graphName.value);
        console.log(myChart.data.datasets[0].label);
        console.log(graphSize.value)
        
        if(parseFloat(graphSize.value)/100 > 0 && parseFloat(graphSize.value)/100 <= 1){
          chartContainer.style.transform = `scale(${parseFloat(graphSize.value)/100})`;
        }else{
          alert('0 초과 100이하의 숫자 사이에서 입력하세요.')
        }       
        
        myChart.data.datasets[0].label = graphName.value;
        myChart.update();
      });
      



      // 그래프 차트
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        //차트설정
        type: "line",
        //차트데이터
        data: {
          labels: [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
          ],
          datasets: [
            {
              label: "My First dataset",
              backgroundColor: "rgb(255, 99, 132)",
              borderColor: "rgb(255, 99, 132)",
              data: [0, 100, 50, 200, 2000, 30, 45],
            },
          ],
          // datasets 이 부분을 조작하시면 차트 아이템의 제목, 배경색, 테두리색, 데이터값을 각각 수정하실 수 있습니다.
        },
        options: {},
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
  </body>
</html>